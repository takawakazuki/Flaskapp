{% extends "base.html" %}
{% block content %}
<h2>ãƒ¡ã‚¤ãƒ³ç”»é¢</h2>

<!-- ğŸ”½ æœˆé¸æŠãƒ•ã‚©ãƒ¼ãƒ  -->
<form method="get" action="/">
  <label for="month">è¡¨ç¤ºã™ã‚‹æœˆã‚’é¸æŠï¼š</label>
  <input type="month" id="month" name="month" value="{{ selected_month }}">
  <input type="submit" value="è¡¨ç¤º">
</form>

<!-- ğŸ”½ ä¹—è»Šå±¥æ­´ãƒ†ãƒ¼ãƒ–ãƒ« -->
{% if ride_list %}
<h3>{{ selected_month }} ã®ä¹—è»Šå±¥æ­´</h3>
<div style="overflow-x: auto;">
  <table border="1" style="min-width: 600px; width: 100%;">
    <tr>
      <th>æ—¥ä»˜</th><th>æ›œæ—¥</th><th>è¡Œã</th><th>å¸°ã‚Š</th><th>æ“ä½œ</th>
    </tr>
    {% for ride in ride_list %}
    <tr>
      <td>{{ ride.date }}</td>
      <td>{{ ride.weekday }}</td>
      <td>{{ ride.go_location }}ï¼ˆ{% if ride.go_driver %}é‹è»¢{% else %}åŒä¹—{% endif %}ï¼‰</td>
      <td>{{ ride.back_location }}ï¼ˆ{% if ride.back_driver %}é‹è»¢{% else %}åŒä¹—{% endif %}ï¼‰</td>
      <td>
        <a href="/{{ ride.id }}/edit">ç·¨é›†</a> |
        <a href="/{{ ride.id }}/delete">å‰Šé™¤</a>
      </td>
    </tr>
    {% endfor %}
  </table>
</div>
{% else %}
<p>{{ selected_month }} ã®ä¹—è»Šæƒ…å ±ãŒç™»éŒ²ã•ã‚Œã¦ã„ã¾ã›ã‚“ã€‚</p>
{% endif %}

<!-- ğŸ”½ æ–°è¦ç™»éŒ²ãƒœã‚¿ãƒ³ï¼ˆæœªç™»éŒ²æ—¥ã®ã¿ï¼‰ -->
{% set date_str = selected_month + '-01' %}
{% if date_str not in already_registered_dates %}
  <div style="margin-top: 1em;">
    <a href="/regist?date={{ date_str }}" class="btn">ï¼‹ æ–°è¦ç™»éŒ²</a>
  </div>
{% endif %}

<!-- ğŸ”½ ç²¾ç®—ç¢ºèªãƒœã‚¿ãƒ³ï¼ˆå¸¸ã«ä¸€ç•ªä¸‹ï¼‰ -->
<div style="margin-top: 2em;">
  <a href="/settlement" class="btn">ğŸ’° ç²¾ç®—ç¢ºèª</a>
</div>

<!-- ğŸ”½ ãƒ­ã‚°ã‚¢ã‚¦ãƒˆãƒœã‚¿ãƒ³ï¼ˆå³ä¸Šé¢¨ã«å›ºå®šï¼‰ -->
<div style="position: absolute; top: 1em; right: 1em;">
  <form method="post" action="/logout" style="display: inline;">
    <button type="submit">ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ</button>
  </form>
</div>

{% endblock %}
